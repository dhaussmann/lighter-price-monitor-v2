name = "lighter-orderbook-tracker"
main = "src/worker-new.ts"
compatibility_date = "2024-12-15"

# Durable Objects
[[durable_objects.bindings]]
name = "LIGHTER_TRACKER"
class_name = "LighterTracker"

[[durable_objects.bindings]]
name = "PARADEX_TRACKER"
class_name = "ParadexTracker"

[[durable_objects.bindings]]
name = "HYPERLIQUID_TRACKER"
class_name = "HyperliquidTracker"

[[durable_objects.bindings]]
name = "EDGEX_TRACKER"
class_name = "EdgeXTracker"

[[durable_objects.bindings]]
name = "ALERT_MANAGER"
class_name = "AlertManager"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "orderbook-data"
database_id = "9bc40b46-ad84-4722-a63c-a4de36edc246"

# Migration
[[migrations]]
tag = "v7-hyperliquid"
new_classes = ["HyperliquidTracker"]

[[migrations]]
tag = "v8-edgex"
new_classes = ["EdgeXTracker"]

# Cron Trigger - Check alerts every minute
[triggers]
crons = ["* * * * *"]
